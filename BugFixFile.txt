Fixed Some bug

Detected new bug

Fixed new bug